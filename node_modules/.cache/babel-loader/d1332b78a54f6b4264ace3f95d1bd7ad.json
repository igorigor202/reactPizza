{"ast":null,"code":"import _slicedToArray from\"C:/Users/Igor N/Desktop/react pizza 24 L/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useDispatch}from'react-redux';import{setSortId}from'../redux/slices/filter/slice';import{SortPropertyEnum}from'../redux/slices/filter/types';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var sortList=[{name:'популярности (DESC)',sortProperty:SortPropertyEnum.POPULAR_DESC},{name:'популярности (ASC)',sortProperty:SortPropertyEnum.POPULAR_ASC},{name:'цене (DESC)',sortProperty:SortPropertyEnum.PRICE_DESC},{name:'цене (ASC)',sortProperty:SortPropertyEnum.PRICE_ASC},{name:'алфавиту (DESC)',sortProperty:SortPropertyEnum.TITLE_DESC},{name:'алфавиту (ASC)',sortProperty:SortPropertyEnum.TITLE_ASC}];var SortPopup=/*#__PURE__*/React.memo(function(_ref){var value=_ref.value;var dispatch=useDispatch();var sortRef=React.useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visiblePopup=_useState2[0],setVisiblePopup=_useState2[1];var onSetActivePopup=function onSetActivePopup(obj){dispatch(setSortId(obj));setVisiblePopup(false);};React.useEffect(function(){var handleClickOutside=function handleClickOutside(event){var _event=event;if(sortRef.current&&!_event.path.includes(sortRef.current)){setVisiblePopup(false);}};document.body.addEventListener('click',handleClickOutside);return function(){return document.body.removeEventListener('click',handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"div\",{ref:sortRef,className:\"sort\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sort__label\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"10\",height:\"6\",viewBox:\"0 0 10 6\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\",fill:\"#2C2C2C\"})}),/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430 \\u043F\\u043E:\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setVisiblePopup(!visiblePopup);},children:value.name})]}),visiblePopup&&/*#__PURE__*/_jsx(\"div\",{className:\"sort__popup\",children:/*#__PURE__*/_jsx(\"ul\",{children:sortList.map(function(obj,i){return/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){return onSetActivePopup(obj);},className:value.sortProperty===obj.sortProperty?'active':'',children:obj.name},i);})})})]});});export default SortPopup;","map":{"version":3,"names":["React","useState","useDispatch","setSortId","SortPropertyEnum","sortList","name","sortProperty","POPULAR_DESC","POPULAR_ASC","PRICE_DESC","PRICE_ASC","TITLE_DESC","TITLE_ASC","SortPopup","memo","value","dispatch","sortRef","useRef","visiblePopup","setVisiblePopup","onSetActivePopup","obj","useEffect","handleClickOutside","event","_event","current","path","includes","document","body","addEventListener","removeEventListener","map","i"],"sources":["C:/Users/Igor N/Desktop/react pizza 24 L/src/components/SortPopup.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setSortId } from '../redux/slices/filter/slice';\nimport { SortPropertyEnum, Sort } from '../redux/slices/filter/types';\n\ntype SortItem = {\n  name: string;\n  sortProperty: SortPropertyEnum;\n};\n\ntype PopupClick = MouseEvent & {\n  path: Node[];\n};\n\ntype SortPopupProps = {\n  value: Sort;\n};\n\nexport const sortList: SortItem[] = [\n  { name: 'популярности (DESC)', sortProperty: SortPropertyEnum.POPULAR_DESC },\n  { name: 'популярности (ASC)', sortProperty: SortPropertyEnum.POPULAR_ASC },\n  { name: 'цене (DESC)', sortProperty: SortPropertyEnum.PRICE_DESC },\n  { name: 'цене (ASC)', sortProperty: SortPropertyEnum.PRICE_ASC },\n  { name: 'алфавиту (DESC)', sortProperty: SortPropertyEnum.TITLE_DESC },\n  { name: 'алфавиту (ASC)', sortProperty: SortPropertyEnum.TITLE_ASC },\n];\n\nconst SortPopup: React.FC<SortPopupProps> = React.memo(({ value }) => {\n  const dispatch = useDispatch();\n  const sortRef = React.useRef<HTMLDivElement>(null);\n\n  const [visiblePopup, setVisiblePopup] = useState(false);\n\n  const onSetActivePopup = (obj: SortItem) => {\n    dispatch(setSortId(obj));\n    setVisiblePopup(false);\n  };\n\n  React.useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const _event = event as PopupClick;\n      if (sortRef.current && !_event.path.includes(sortRef.current)) {\n        setVisiblePopup(false);\n      }\n    };\n\n    document.body.addEventListener('click', handleClickOutside);\n\n    return () => document.body.removeEventListener('click', handleClickOutside);\n  }, []);\n\n  return (\n    <div ref={sortRef} className=\"sort\">\n      <div className=\"sort__label\">\n        <svg\n          width=\"10\"\n          height=\"6\"\n          viewBox=\"0 0 10 6\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\">\n          <path\n            d=\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\"\n            fill=\"#2C2C2C\"\n          />\n        </svg>\n        <b>Сортировка по:</b>\n        <span onClick={() => setVisiblePopup(!visiblePopup)}>{value.name}</span>\n      </div>\n      {visiblePopup && (\n        <div className=\"sort__popup\">\n          <ul>\n            {sortList.map((obj, i) => (\n              <li\n                key={i}\n                onClick={() => onSetActivePopup(obj)}\n                className={value.sortProperty === obj.sortProperty ? 'active' : ''}>\n                {obj.name}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default SortPopup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}